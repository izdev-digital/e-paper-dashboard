@page
@model EPaperDashboard.Pages.Users.ProfileModel
@{
    ViewData["Title"] = "My Profile";
}

<h2>My Profile</h2>

@if (!string.IsNullOrEmpty(Model.SuccessMessage))
{
    <div class="alert alert-success">@Model.SuccessMessage</div>
}
@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <div class="alert alert-danger">@Model.ErrorMessage</div>
}

<p><strong>Username:</strong> @Model.GetUsername()</p>

<form method="post" asp-page-handler="ChangeNickname" class="mb-4">
    <p><strong>Nickname:</strong> @Model.GetNickname()</p>
    <div class="mb-3">
        <label class="form-label">New Nickname</label>
        <input type="text" class="form-control" asp-for="NewNickname" required />
    </div>
    <button type="submit" class="btn btn-primary">Change Nickname</button>
</form>

<form method="post" asp-page-handler="ChangePassword" class="mb-4">
    <p><strong>Password:</strong></p>
    <div class="mb-3">
        <label class="form-label">Current Password</label>
        <input type="password" class="form-control" asp-for="CurrentPassword" required />
    </div>
    <div class="mb-3">
        <label class="form-label">New Password</label>
        <input type="password" class="form-control" asp-for="NewPassword" required />
    </div>
    <div class="mb-3">
        <label class="form-label">Confirm Password</label>
        <input type="password" class="form-control" asp-for="ConfirmNewPassword" required />
    </div>
    <button type="submit" class="btn btn-primary">Change Password</button>
</form>

<form method="post" asp-page-handler="DeleteProfile" onsubmit="return confirm('Are you sure you want to delete your profile? This action cannot be undone.');">
    <button type="submit" class="btn btn-danger">Delete My Profile</button>
</form>
